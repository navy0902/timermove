<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<style>
	ul{
		margin:0 auto;
		padding:0; 
		position:relative;
		height:170px;
		overflow:hidden;
		}
	li{
		list-style:none;
		width:120px;
		height:170px;
		float:left;
		position:relative;	
		}
	div{
		height:340px;
		position:absolute;
		top:0;	
		}
	img{
		width:120px;
		height:170px;	
		}
</style>
</head>

<body>
	<ul>
    	<li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
        <li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
        <li>
       		<img src="images/colon.JPG"/>
        </li>
        <li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
        <li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
        <li>
       		<img src="images/colon.JPG"/>
        </li>
        <li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
        <li>
       		<div><img src="images/0.JPG"/><img src="images/0.JPG"/></div> 
        </li>
    </ul>
    
    <script>
   		var divs=document.getElementsByTagName("div");
		//var douhao=document.getElementsByTagName("li>img");//子代选择器，指儿子这一代
		var douhao=document.querySelectorAll("li>img");
		
		
		var mytimes=getTime();
		for(var i=0;i<divs.length;i++){
			divs[i].getElementsByTagName("img")[0].src="images/"+mytimes[i]+".jpg";	
			}
		
		//更改时间的定时器
		setInterval(function(){
			//点的闪烁
			for(var i=0;i<douhao.length;i++){
					douhao[i].src="images/colon1.JPG";	
				}	
				setTimeout(function(){
					for(var i=0;i<douhao.length;i++){
						douhao[i].src="images/colon.JPG";	
						}		
					},500);
					autoplay();
			},1000);
			
		function autoplay(){
			var time=getTime();
			for(var i=0;i<time.length;i++){
					if(mytimes[i]!=time[i]){
						change(i,time);	
						}
				}
				mytimes=time;	
			}
		//改变图片
		function change(n,time){
			var images=divs[n].getElementsByTagName("img");
			images[1].src="images/"+time[n]+".jpg";	
			divs[n].style.top="-170px";
			divs[n].style.webkitTranstion="1s";
			
			
			//往上滚动
		move(divs[n],function(){
				images[0].src="images/"+time[n]+".jpg";
				divs[n].style.top="";	
			});
			
			
			}
		
		
		
		
		function move(obj,callback){
				var t=0;
				var myinterval;
				myinterval=setInterval(function(){
					t+=17;
					obj.style.top=-t+"px";
					if(t>=170){
						clearInterval(myinterval);	
						callback && callback();
						}
					},30);
			}
		
		
		function getTime(){
				var date=new Date();
				var h=date.getHours();
				var m=date.getMinutes();
				var s=date.getSeconds();
				var time=toTwo(h)+toTwo(m)+toTwo(s);
				return time;
			} 
		function toTwo(n){
			return n<10 ? '0'+n : ''+n; 	
			}
    </script>
</body>
</html>
